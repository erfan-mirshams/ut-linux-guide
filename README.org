#+title: GNU/Linux
#+author: Erfan Mirshams
#+language: persian

* مقدمه + تاریخچه ریز
آقای ریچارد استالمن سیستم‌عامل GNU رو در سال ۱۹۸۵ منتشر کرد که هدف اصلی این پروژه گسترش سیستم‌عاملی در راستای ارزش‌های نرم‌افزار آزاد و احترام به حریم خصوصی و آزادی کاربر بود. ایشون بنیاد نرم افزار آزاد هم بنیان‌گذاری کرده و به علاوه پروژه‌هایی از قبیل GCC و Emacs هم کلید زده. سیستم عامل گنو همون طور که از اسم مخففش پیداست (GNU's not unix) سیستم‌عاملی مشابه سیستم عامل Unix هست و از فلسفه های مشابه اون در منطق اجرای برنامه ها پیروی می‌کنه. در سال ۱۹۹۱ هم یک دانشجوی فنلاندی در زمان آقای لینوس توروالدز که الان پشت پروژه هایی همچون گیت هم هست، از ابزارهای توسعه نرم‌افزار گنو استفاده کرد و کرنل لینوکس رو توسعه داد و لایسنس آزاد هم براش قرار داد. بعد از این قضیه این کرنل در پروژه گنو به عنوان کرنل اصلی سیستم‌عامل استفاده شد و امروزه به‌خاطر راحتی و خوش‌اسم بودن به جای  سیستم عامل گنو/لینوکس بیشتر با اسم لینوکس بهش اشاره میشه.
#+caption: stallman
#+attr_html: :alt stallman :align right
[[https://github.com/erfan-mirshams/ut-linux-guide/blob/master/src/stallman.jpg]]

عکس آقای استالمن و ژست دختر کشش

#+caption: torvalds
#+attr_html: :alt torvalds :align right
[[https://github.com/erfan-mirshams/ut-linux-guide/blob/master/src/torvalds.jpg]]

عکس آقای توروالدز در دوران طفولیت

* قدم اول
طبق طبیعتی که این پروژه داره و نرم‌افزار آزاد هست، یه دو راهی که چه عرض کنم، هزار راهی اول کار جلوی کاربر هست که کدوم توزیع رو نصب کنه. یه کلیتی از توزیع های لینوکس رو میشه توی سایت [[https://distrowatch.com/][distrowatch]] ببینید. توصیه من اینه که توزیع ها مخصوصا توزیع های just works مثل اوبونتو و لینوکس مینت و پاپ او اس و ... همشون در باطن عین همن و فرقی نداره کدوم رو نصب کنید. مهم محیط میز کاره (Desktop Environment) که پروژه های متنوعی از جمله gnome، kde، xfce، cinnamon  و تعداد کثیر دیگه ای موجوده. این اسامی که گفتم رو جستجو کنید محیطش رو ببینید. ببینید با کدوم بیشتر حال می‌کنید و نسخه از توزیع‌های بالا که گفتم  رو با اون محیط نصب کنید. مثلا kubuntu اوبونتو همراه با kde هست. نصب هم ویدیو های زیادی روی اینترنت هست که نصبش رو آموزش میدن و به مراتب از نصب ویندوز ساده‌تره با یه جستجوی ساده مثل "install filan distro on virtualbox" می‌تونید یاد بگیرید و انجام بدید و برید سراغ مراحل بعد و آموزش استفاده. چون اوبونتو پر نصب ترین توزیعه در ادامه بیشتر توضیحاتی که می‌دم در محیط اوبونتو خواهد بود ولی با یه سری تغییرات یا حتی بدون تغییرات قابل تعمیم به سایر توزیع‌ها است.

* چند نما از محیط‌های مختلف میز کار

#+caption: cinnamon
#+attr_html: :alt cinnamon :align right
[[https://github.com/erfan-mirshams/ut-linux-guide/blob/master/src/cinnamon-desktop.png]]

cinnamon

#+caption: gnome
#+attr_html: :alt gnome :align right
[[https://github.com/erfan-mirshams/ut-linux-guide/blob/master/src/gnome.jpg]]

gnome

#+caption: kde
#+attr_html: :alt cinnamon :align right
[[https://github.com/erfan-mirshams/ut-linux-guide/blob/master/src/kde-plasma-desktop.jpg]]

kde

#+caption: xfce
#+attr_html: :alt cinnamon :align right
[[https://github.com/erfan-mirshams/ut-linux-guide/blob/master/src/xfce.png]]

xfce

* قدم صفرم
تو این هدینگ می خوام دلایلی رو بگم که یک نفر نباید لینوکس بریزه:
- خیلی به گیمینگ می‌پردازه. (البته آپشن ماشین مجازی رو داره یا می تونه رو یه لپتاپ دیگه ای بریزه)، شرکت valve خیلی داره رو گیمینگ رو لینوکس سرمایه‌گذاری می کنه و سرویس هایی مثل steam و lutris و تعداد کثیری بازی موجوده ولی بازم هنوز با ویندوز فاصله معنی داری داره.
- ارادت و نیاز مبرم به برنامه‌های خاص که فقط نسخه ویندوز یا مک دارن. البته این مساله هست که برنامۀ جایگزین روی لینوکس زیاده ولی برنامه هایی مثل Adobe Suite اگه خیلی بهشون عادت دارید و نمی تونید یه workflow جدید یاد بگیرید. یا مثلا 3D Max و Katia و اینجور چیزا. در حوزه توسعه نرم افزار تنها IDE های معروفی که می دونم روی لینوکس موجود نیست Visual Studio و Xcode هستن (VSCode روی لینوکس هست).
- حوصله یاد گرفتن مهارت جدید و یا گذروندن یه learning curve یکی دو هفته ای رو نداشته باشه.
- کامپیوترتون برای خودتون نباشه و کس دیگه ای هم قراره ازش استفاده کنه. تو این حالت هم از ماشین مجازی استفاده کنید.
- لپتاپ های مک که SOC های جدید اپل (M1) رو دارن دارید. قراره پشتیبانی اینا به کرنل اضافه بشه تا جایی که می‌دونم  ولی فعلا ساپورت نشدن.
- دختر هستید. این رو می‌نویسم ببینم کسی می‌خونه اصلا فایل رو و واکنشی بهش داده می‌شه یا که خیر. (میرمسیب نزنی ما رو)

* قدم نیمم
تو این هدینگ دلایلی رو می‌گم که چرا یه نفر خوبه لینوکس بریزه:
- در حوزه توسعه نرم افزار خیلی کارش راحت تر می‌شه و به طور کلی آشنایی با فلسفه Unix باعث می‌شه برنامه نویس بهتری بشه.
- اکثر سرور های عالم روشون لینوکس نصبه پس اگه بخواید وارد حوزه شبکه بشید یا توی دیتا سنتری جایی کار کنید نیاز به آشنایی با لینوکس دارید.
- دختر هستید. مزاح بنده رو بامزه تلقی نکردید و می‌خواید با ریختن لینوکس مشتی محکم بر دهانم بزنید.
- دلیل وجود لینوکس اول از همه چیز احترام به آزادی و حریم خصوصی کاربره پس این دلیل به خودی خودش برای ترغیب به نصب لینوکس کمک می‌کنه.
- میم شده و همه دوستاتون دارن لینوکس میریزن پس تو هم بریز که از قافله عقب نمونی. (چون برخی از نکات مثبتش تا استفاده نکنید دستتون نمی‌یاد این روش peer pressure در این موارد زیاد بکار می‌آد حتی کاربران توزیع هایی مثل Arch از این روش برای تبلیغ توزیعشون استفاده می‌کنن).

* نصب
توضیح مراحل نصب کار به نسبت باطلیه چون سخت افزار ها فرق میکنه. ولی اگر سخت افزارتون خیلی جدید نباشه نباید به مشکل خاصی بخورید. توصیه می‌شه قبل نصب live mode بالا میارید و تست کنید (گزینه try ubuntu). [[https://odysee.com/@DistroTube:2/is-ubuntu-22.04-the-best-ubuntu-in-years:f][فیلم آموزش نصب اوبونتو]].
اگر فیلم فارسی هم مد نظرتونه آقای صحرايی هم [[https://youtu.be/5bhL_ubJ1gM][فیلم نصب اوبونتو روی ویرچوال باکس همراه مخلفاتی از bash و یک سکته ناقص]] رو پر کرده.
انواع نصب:
1. نصب به عنوان تنها سیستم عامل: برای این کار حتما اطلاعات روی کامپیوتر رو backup بگیرید. موقع نصب هم گزینه erase all disks رو بزنید.
2. دوال بوت: نصب لینوکس همراه ویندوز و انتخاب بین اینها موقع بوت. برای اینکار به دوستی که بلده مراجعه کنید و خودتون سراغش نرید.
3. ماشین مجازی: اجرای سیستم‌عاملی درون سیستم‌عامل میزبان. نرم‌افزار‌های استفاده شده Virtualbox، VMware و ...
در ضمن بهتره ورژنی که می‌‌‌ریزید از بین ورژن های LTS باشه تا مشکلات کمتری براتون پیش بیاد.
* نرم‌افزار‌ها
نرم‌افزار‌هایی که برای کار‌های روزمره‌تون ممکنه نیاز بشه:
1. مرورگر: هر مرورگری روی ویندوز موجوده روی لینوکس هم موجوده. فقط نصب مرورگر‌هایی که انحصاری ان مثل Google Chrome و Edge سخت‌تره و کلا توصیه نمی‌شه. به حریم شخصی خودتون احترام بذارید و یا Firefox بریزید یا اگر مرورگر Chromium base می‌خواید Chromium و Brave موجودن.
2. مشاهده و مدیریت گرافیکی فایل ها: روی Gnome که اوبونتو ازش استفاده می کنه Nautilus موجوده و انتخاب های دیگری هم هست اگر از File Manager روی اوبونتو خوشتون نیومده.
3. پخش فیلم و موزیک: MPV، VLC، Rhythmbox و کلی برنامه دیگه برای این منظور موجوده.
4. برای کار‌های طراحی مثلا شبیه PhotoShop گزینه‌هایی مثل GIMP و  Krita هست.
5. برای طراحی‌های سه بعدی یا حتی تدوین Blender هم موجوده که توی ویندوز و مک هم محبوبه. برای تدوین البته Kdenlive هم هست.
6. به تعداد کثیری هم text editor موجوده از Vim و Emacs گرفته تا VSCode و Notepadqq که شبیه Notepad++ تو ویندوزه.
7. برای office suite پروژه بسیار خوب LibreOffice به جای استفاده از Microsot Office موجوده که فایل های ساخته شده با آفیس مایکروسافت رو هم باز می‌کنه. نسخه ویندوز و مک LibreOffice هم موجوده.
این هم  [[https://wiki.installgentoo.com/index.php/List_of_recommended_GNU/Linux_software][یه لیست خیلی خوب و جامع از نرم‌افزار‌های در دسترس بر روی لینوکس]].

* نصب نرم‌افزار
به طور کلی روش نصب نرم‌افزار روی لینوکس با ویندوز متفاوته که البته این از نقاط قوت اصلی این سیستم عامل هست. دیگه نیازی نیست مثل ویندوز از اینترنت فایل exe رندم دانلود کنید و رولت روسی بازی کنید که آیا ویروسی هست یا نه.  روی اوبونتو یک Software Center گرافیکی هست که برای اول کار اگر هنوز دستتون توی ترمینال راه نیفتاده اکثر پکیج‌های موجود رو می‌تونید از روی اون به حالتی شبیه نصب برنامه از روی PlayStore روی موبایل نصب کنید. توزیع‌های لینوکس خودشون هم Package Manager مخصوص خودشون رو دارن که از مخازن نرم‌افزار‌های موجود اون توزیع که توسعه دهنده هاش آزمایش کردن و تایید کردن روی سیستم شما نرم‌افزار نصب می کنه. اتفاقی که پشت پرده می افته پیچیده‌تر از این حرفاست و توزیع های مختلف از Package Manager های مختلف و فلسفه‌های مختلفی  بعضا برای توزیع نرم افزار استفاده می‌کنن ولی خب همین توضیحات داده شده برای اینکه اولا کار آدم راه بیفته کفایت می کنه. Ubuntu چون Debian based هست (Debian هم یه توزیع لینوکسه که بعد ها احتمالا سراغش برید) از apt استفاده میکنه. توضیح کتابی دستور apt اولش ممکنه گیج‌کننده باشه برای همین یه چند تا مثال ازش می‌زنیم خودتون وقتی باهاش دوست شدید بیشتر راجع بهش بخونید.

** یه چند تا مثال
ترمینال رو باز کنید. یا از طریق منوی برنامه ها یا توی اوبونتو با کلید‌های CTRL + ALT + T.
*** دستور بروزرسانی کامل سیستم
#+begin_src shell
sudo apt update && sudo apt upgrade
#+end_src

داخل گیومه این رو هم بگم که قبل دستوری sudo بزنید یه چیزی مشابه Run as Admin روی ویندوزه (اصلا شبیه نیست ولی فعلا توضیح بهتری ندارم) و ازتون پسورد خواهد خواست بعد زدن این دستور. اکثر اوقات هم داخل توزیع ها وقتی داخل ترمینال پسورد رو وارد میکنید تعداد کاراکتراشو برای مسائل امنیتی نشون نمی‌ده (فکر نکنید کیبوردتون رو نمی‌خونه). و از جاهایی که sudo به کار میاد برای حذف و اضافه نرم افزار و بروزرسانی سیستم هست.

*** دستور نصب نرم افزار
#+begin_src shell
sudo apt install <package_name>
#+end_src

به جای package اسم پکیج درخواستی‌تون رو بزنید. مثلا برای نصب Htop از دستور زیر استفاده کنید. Htop یه سیستم مانیتوره توی ترمینال (مشابه Task Manager)

#+begin_src shell
sudo apt install htop
#+end_src

*** دستور حذف نرم افزار

#+begin_src shell
sudo apt remove <package_name>
#+end_src

*** دستور جستجوی نرم افزار
برای اینکه ببینید اسم دقیق پکیج یه نرم‌افزار چیه و آیا اصلا توی مخازن دیفالت apt موجوده یا که خیر

#+begin_src shell
apt search <package_name>
#+end_src

دقت کنید که اینجا نیازی به sudo نداریم.

*** مشاهده لیست پکیج های نصب شده

#+begin_src shell
apt list --installed
#+end_src

فعلا همین دستور ها برای شروع کار کافیه.

** اسفاده از Synaptic
روی سیستم‌هایی که از apt استفاده میکنن synaptic package manager هم موجوده که یه چیزی بین حالت گرافیکی و حالت CLI هست. از اون هم برای حذف و اضافه نرم‌افزار می تونید استفاده کنید. توی لیست نرم‌افزار هاتون Synaptic باید موجود باشه.

* نصب VSCode
به دلایلی که نمی‌دونم چرا VSCode توی مخازن اصلی اوبونتو و دبیان موجود نیست. برای همین برای نصبش یه راه روی اوبونتو پیشنهاد می‌دم. (تنها راه نیست)
ترمینال رو باز کنید و دستور زیر رو بزنید.
#+begin_src shell
sudo snap install --classic code
#+end_src
خودم خیلی با snap دوست نیستم ولی خب راه های دیگه که بود برای اول کار یخورده پیچیده بود و بچه ها اکثرا به VSCode برای کار هاشون نیاز دارن. پایینتر روشی که خودم انتخاب می‌کردم رو گفتم.

** پاک کردن پکیج Snap
با این دستور:
#+begin_src shell
sudo snap remove --purge <package_name>
#+end_src

* پکیج منیجر Nix
پروژه NixOS خودش یه توزیع لینوکسه و نکته مثبتی که داره اینه که پکیج منیجر nix قابل استفاده در تمام سیستم های Unixlike قبیل MacOs، GNU/Linux و BSD هست. خوبی دیگش اینه پکیج ها به طور کانتینریزه شده ارائه می‌شن و قابلیت برگشتن به Generation های قبلی از سیستم رو میده. برای اطلاعات بیشتر به [[https://nixos.org/][سایت رسمی پروژه]] مراجعه کنید. اما دلیلی که ما می‌خوایم از nix استفاده کنیم اینه که دبیان بدلیل استفاده اصلیش که توی سرور ها هست نیاز به stable بودن داره. برای همین بسیاری از پکیج ها به طور رسمی ارائه و ساپورت نمی‌شن (مخصوصا پکیج های مورد نیاز در دسکتاپ) و یا دیر به دیر آپدیت و بروزرسانی می‌شن. شرکت اصلی پشت اوبونتو ، Canonical، برای این مشکل SnapCraft رو درست کرده. ولی خب همون طور که بالاتر گفتم خیلی Snap رو دوست ندارم و انتقاد های زیادی بهش وارد شده و جایی غیر از اوبونتو ندیدم ازش استفاده بشه و خیلی قابل تعمیم به سایر سیستم های Unixlike نیست بر خلاف nix. البته nix در توزیع های Arch Based به دلیل وجود AUR (که فعلا راجع بهش توضیح نمی‌دم در عالم دبیان داریم به سر می‌بریم) نیاز نمی‌شه. در ادامه راه نصب و فعال سازی nix و بعد اون نصب و حذف نرم افزار از طریق اون رو آموزش می‌دم. رو این نکته تاکید کنم که nix جایگزین خوبی برای Snap هست نه apt پس اگر پکیجی توی apt وجود داره نصبش از اون طریق به جای nix ارجحیت داره.

** راهنمای نصب و راه اندازی
ترمینال رو باز کنید. و دستور های زیر رو بزنید.
#+begin_src shell
curl --proto '=https' --tlsv1.2 -sSfL https://nixos.org/nix/install -o nix-install.sh
chmod +x nix-install.sh
./nix-install.sh --daemon
systemctl enable nix-daemon.service
nix-channel --add https://nixos.org/channels/nixpkgs-unstable
nix-channel --update
#+end_src

شاید نیاز به Restart باشه بعد این دستور ها. دقت کنید اینها با موفقیت اجرا بشن. متاسفانه بعضی وقتا سر فیلترینگ اینجور چیزا ممکنه به مشکل بخورن.

** نصب نرم افزار از طریق Nix
حالا برای مثال میخوایم VSCode رو که قبلا با Snap نصب کرده بودیم با Nix نصب کنیم. این کار برای هر پکیج دیگه ای هم قابل تعمیمه. به [[https://search.nixos.org/packages][پنل جستوی پکیج Nix]] برید و پکیج مورد نظر رو جستجو کنید و بعد روی گزینه که می‌خواید کلیک کنید و روی زبونه nix-env و خط On Non NixOS برید و دستور اون رو کپی کنید و داخل ترمینال اجرا کنید. مشابه عکس پایین.


#+caption: nix-vscode-example
#+attr_html: :alt nix-vscode-example :align right
[[https://github.com/erfan-mirshams/ut-linux-guide/blob/master/src/nix-example.png]]

و دستور داده شده رو توی ترمینال می‌زنیم. اینجا دستور نصب VSCode
#+begin_src shell
nix-env -iA nixpkgs.vscodium
#+end_src

ممکنه برای اجرای این دستور sudo نیاز باشه. اگه گفت اجازه ندارید با sudo اجرا کنید. یه کلک هم بهتون بگم که برای اجرای دوباره آخرین دستور وارد شده می‌تونید "!!" بزنید. پس اگر بخواید همون دستور قبلی رو با sudo اجرا کنید لازمه بزنید:

#+begin_src shell
sudo !!
#+end_src

یک موضوع دیگری هم که هست اینه من VSCode رو نصب نکردم و VSCodium رو نصب کردم به شما هم همین توصیه رو می‌کنم. VSCode با وجود اینکه اوپن سورسه ولی پدر سوختگی هایی از طرف مایکروسافت توی سورس کدش پیدا شده که توی VSCodium وجود نداره. برای اجراش هم یا از لیست GUI برنامه ها اجرا می کنید یا توی ترمینال دستور =codium= رو میزنید.

** بروزرسانی پکیج های نصب شده از طریق Nix
#+begin_src shell
sudo nix-channel --update
sudo nix-env -u ‘*’
#+end_src

بازم ممکنه از شما sudo بخواد برای خط آخر.

** حذف پکیج
#+begin_src shell
sudo nix-env --uninstall <package_name>
#+end_src

اگر هم اهل آموزش فیلمی هستید این هم [[https://odysee.com/@AlphaNerd:8/nix-the-best-package-manager:1][فیلم]].

* وصل شدن بی‌سیم تلفن همراه به کامپیوتر با KDEConnect
برای این کار پکیج KDEConnect رو بر روی سیستم‌تون نصب کنید. اپلیکیشن KDEConnect برای اندروید هم روی موبایلتون نصب کنید. از اینکه نسخته IOS داره یا نه اطلاعی ندارم. حواستون باشه که تلفن همراه و کامپیوترتون هر دو به یک شبکه wifi متصل باشند. یا که به HotSpot گوشیتون با کامپیوتر متصل بشید. بعد این برنامه KDEConnect رو هم روی گوشی و هم روی کامپیوتر اجرا کنید. بعد یه چند ثانیه روی صفحه برنامه اسم دستگاه های متصل به شبکه دیده میشه. اگر اینطور نشد، صفحه رو رفرش کنید و به امید خدا درست می‌شه. من که تا حالا باهاش به مشکل قطعی ای نخوردم. از یکی از دستگاه ها درخواست pair شدن بدید و توی دستگاه دیگه درخواستی که میاد رو تایید کنید. تبریک می‌گم دو دستگاه رو به هم وصل کردید. حالا می‌تونید دو طرفه فایل انتقال بدید. اعلان های دو دستگاه به هم انتقال پیدا می‌کنه. همچنین می‌تونید کلیپ بورد یه دستگاه رو با دیگری به اشتراک بذارید. با KDEConnect دو گوشی هم می‌تونید به هم به روش مشابهی به صورت بی سیم متصل کنید. با اینکه پشت پرده این برنامه احتمالا خیلی چیز عجیب غریبی نباشه و با دستور SFTP یا مشابهش کار بکنه ولی خب normie friendly هست و کار آدم رو راه میندازه.
